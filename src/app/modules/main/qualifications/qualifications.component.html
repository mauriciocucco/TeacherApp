<div id="container">
	<div id="filters">
		<mat-card>
			<mat-card-header>Filtros</mat-card-header>
			<mat-card-content>
				<div id="content-container">
					<mat-form-field>
						<mat-label>Alumno</mat-label>
						<input matInput placeholder="Nombre y apellido" />
					</mat-form-field>
					<mat-form-field appearance="fill">
						<mat-label>Proyecto</mat-label>
						<mat-select>
							<mat-option
								*ngFor="let project of projects"
								[value]="project.id">
								{{ project.name }}
							</mat-option>
						</mat-select>
					</mat-form-field>
				</div>
			</mat-card-content>
		</mat-card>
	</div>

	<!-- Table -->
	<table
		mat-table
		[dataSource]="dataSource"
		class="mat-elevation-z8"
		id="qualifications-table">
		<ng-container matColumnDef="student">
			<th mat-header-cell *matHeaderCellDef class="sticky-head">
				Alumno
			</th>
			<td mat-cell *matCellDef="let element">
				<div class="student-info-wrapper">
					<h4>{{ element.name }} {{ element.lastName }}</h4>
					<img
						class="student-picture"
						[src]="element.image"
						alt="foto del estudiante" />
				</div>
			</td>
		</ng-container>

		<ng-container
			*ngFor="let project of projects"
			[matColumnDef]="project.name">
			<th mat-header-cell *matHeaderCellDef class="project-header">
				<p>{{ project.name }}</p>
				<p>{{ project.date | shortDate }}</p>
			</th>
			<td mat-cell *matCellDef="let element" class="project-td">
				<div class="project-td-content">
					<p>
						<mat-form-field appearance="fill">
							<mat-label>Nota</mat-label>
							<mat-select
								[value]="
									{
										studentProjects: element.projects,
										projectToMatch: project.id
									} | studentData : 'qualification'
								">
								<mat-option
									*ngFor="let qualification of qualifications"
									[value]="qualification.id">
									{{ qualification.name }}
								</mat-option>
							</mat-select>
						</mat-form-field>
					</p>
					<p>
						<mat-form-field class="observation-textarea">
							<mat-label>Observaci√≥n</mat-label>
							<textarea matInput
								>{{
									{
										studentProjects: element.projects,
										projectToMatch: project.id
									} | studentData : 'observation'
								}}
							</textarea
							>
						</mat-form-field>
					</p>
				</div>
			</td>
		</ng-container>

		<tr
			mat-header-row
			*matHeaderRowDef="displayedColumns"
			class="special-header-row"></tr>
		<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
	</table>
</div>
